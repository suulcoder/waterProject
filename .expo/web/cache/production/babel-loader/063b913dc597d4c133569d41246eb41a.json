{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";var _actionMap;function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createForOfIteratorHelperLoose(o){var i=0;if(typeof Symbol===\"undefined\"||o[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]==null){if(Array.isArray(o)||(o=_unsupportedIterableToArray(o)))return function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};};throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");}i=o[typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\"]();return i.next.bind(i);}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o===\"string\")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n===\"Object\"&&o.constructor)n=o.constructor.name;if(n===\"Map\"||n===\"Set\")return Array.from(n);if(n===\"Arguments\"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen);}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i];}return arr2;}import React from'react';import Image from\"react-native-web/dist/exports/Image\";import Animated from\"react-native-web/dist/exports/Animated\";import Easing from\"react-native-web/dist/exports/Easing\";import{createAppContainer,NavigationActions,StackActions}from'react-navigation';import{createStackNavigator}from'react-navigation-stack';import{createDrawerNavigator,DrawerActions}from'react-navigation-drawer';import{createMaterialTopTabNavigator,createBottomTabNavigator}from'react-navigation-tabs';import PropTypes from'prop-types';import createReducer from\"./Reducer\";import*as ActionConst from\"./ActionConst\";import{OnEnter,OnExit,assert}from\"./Util\";import{LeftButton,RightButton,BackButton}from\"./NavBar\";import LightboxRenderer from\"./LightboxRenderer\";import _drawerImage from\"../images/menu_burger.png\";import{getActiveState,getParent,getRouteNameByKey}from\"./State\";import Modal from\"./Modal\";import Lightbox from\"./Lightbox\";import Drawer from\"./Drawer\";import Tabs from\"./Tabs\";import Overlay from\"./Overlay\";import OverlayRenderer from\"./OverlayRenderer\";import createStackNavigatorHOC from\"./createStackNavigatorHOC\";import createTabNavigatorHOC from\"./createTabNavigatorHOC\";var RightNavBarButton;var LeftNavBarButton;var BackNavBarButton;var counter=0;export var actionMap=(_actionMap={},_defineProperty(_actionMap,ActionConst.JUMP,'jump'),_defineProperty(_actionMap,ActionConst.PUSH,'push'),_defineProperty(_actionMap,ActionConst.REPLACE,'replace'),_defineProperty(_actionMap,ActionConst.BACK,'pop'),_defineProperty(_actionMap,ActionConst.BACK_ACTION,'pop'),_defineProperty(_actionMap,ActionConst.POP_TO,'popTo'),_defineProperty(_actionMap,ActionConst.REFRESH,'refresh'),_defineProperty(_actionMap,ActionConst.RESET,'reset'),_defineProperty(_actionMap,ActionConst.PUSH_OR_POP,'push'),_actionMap);var reservedKeys=['addRef','back','children','create','dispatch','drawerClose','drawerOpen','execute','left','leftButton','navBar','navigate','on','onEnter','onExit','onLeft','onRight','pop','popTo','push','refresh','refs','removeRef','renderLeftButton','renderRightButton','renderTitle','replace','right','rightButton','run','setParams','title'];var dontInheritKeys=['backToInitial','children','component','contentComponent','drawer','hideNavBar','hideTabBar','key','lightbox','modal','navigator','navTransparent','overlay','ref','style','tabBarComponent','tabs','title','type'];function getValue(value,params){return value instanceof Function?value(params):value;}function getProperties(){var component=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var res={};for(var _iterator=_createForOfIteratorHelperLoose(reservedKeys),_step;!(_step=_iterator()).done;){var key=_step.value;if(component[key]){res[key]=component[key];}}delete res.children;return res;}function createTabBarOptions(_ref){var tabBarStyle=_ref.tabBarStyle,activeTintColor=_ref.activeTintColor,inactiveTintColor=_ref.inactiveTintColor,activeBackgroundColor=_ref.activeBackgroundColor,inactiveBackgroundColor=_ref.inactiveBackgroundColor,showLabel=_ref.showLabel,labelStyle=_ref.labelStyle,tabStyle=_ref.tabStyle,props=_objectWithoutProperties(_ref,[\"tabBarStyle\",\"activeTintColor\",\"inactiveTintColor\",\"activeBackgroundColor\",\"inactiveBackgroundColor\",\"showLabel\",\"labelStyle\",\"tabStyle\"]);return _objectSpread(_objectSpread({},props),{},{style:tabBarStyle,activeTintColor:activeTintColor,inactiveTintColor:inactiveTintColor,activeBackgroundColor:activeBackgroundColor,inactiveBackgroundColor:inactiveBackgroundColor,showLabel:showLabel,labelStyle:labelStyle,tabStyle:tabStyle});}function createNavigationOptions(params){var back=params.back,backButtonImage=params.backButtonImage,backButtonTextStyle=params.backButtonTextStyle,backTitle=params.backTitle,backTitleEnabled=params.backTitleEnabled,backToInitial=params.backToInitial,component=params.component,drawerIcon=params.drawerIcon,drawerImage=params.drawerImage,drawerPosition=params.drawerPosition,getTitle=params.getTitle,headerLayoutPreset=params.headerLayoutPreset,headerStyle=params.headerStyle,headerTitleStyle=params.headerTitleStyle,hideDrawerButton=params.hideDrawerButton,hideNavBar=params.hideNavBar,hideTabBar=params.hideTabBar,icon=params.icon,init=params.init,left=params.left,leftButton=params.leftButton,leftButtonImage=params.leftButtonImage,leftButtonTextStyle=params.leftButtonTextStyle,leftTitle=params.leftTitle,navBar=params.navBar,navBarButtonColor=params.navBarButtonColor,navigationBarStyle=params.navigationBarStyle,navigationBarTitleImage=params.navigationBarTitleImage,navigationBarTitleImageStyle=params.navigationBarTitleImageStyle,navTransparent=params.navTransparent,onLeft=params.onLeft,onRight=params.onRight,panHandlers=params.panHandlers,renderBackButton=params.renderBackButton,renderNavigationBar=params.renderNavigationBar,renderTitle=params.renderTitle,right=params.right,rightButton=params.rightButton,rightButtonImage=params.rightButtonImage,rightButtonTextStyle=params.rightButtonTextStyle,rightTitle=params.rightTitle,tabBarIcon=params.tabBarIcon,tabBarLabel=params.tabBarLabel,title=params.title,titleStyle=params.titleStyle,props=_objectWithoutProperties(params,[\"back\",\"backButtonImage\",\"backButtonTextStyle\",\"backTitle\",\"backTitleEnabled\",\"backToInitial\",\"component\",\"drawerIcon\",\"drawerImage\",\"drawerPosition\",\"getTitle\",\"headerLayoutPreset\",\"headerStyle\",\"headerTitleStyle\",\"hideDrawerButton\",\"hideNavBar\",\"hideTabBar\",\"icon\",\"init\",\"left\",\"leftButton\",\"leftButtonImage\",\"leftButtonTextStyle\",\"leftTitle\",\"navBar\",\"navBarButtonColor\",\"navigationBarStyle\",\"navigationBarTitleImage\",\"navigationBarTitleImageStyle\",\"navTransparent\",\"onLeft\",\"onRight\",\"panHandlers\",\"renderBackButton\",\"renderNavigationBar\",\"renderTitle\",\"right\",\"rightButton\",\"rightButtonImage\",\"rightButtonTextStyle\",\"rightTitle\",\"tabBarIcon\",\"tabBarLabel\",\"title\",\"titleStyle\"]);var NavBar=renderNavigationBar||navBar;if(component&&component.navigationOptions){return component.navigationOptions;}return function(_ref2){var navigation=_ref2.navigation,screenProps=_ref2.screenProps;var navigationParams=navigation.state.params||{};var state=_objectSpread(_objectSpread(_objectSpread({navigation:navigation},params),navigationParams),screenProps);var res=_objectSpread(_objectSpread({},props),{},{headerBackImage:navigationParams.backButtonImage||backButtonImage,headerBackTitle:getValue(navigationParams.backTitle||backTitle,state),headerBackTitleEnabled:navigationParams.backTitleEnabled||backTitleEnabled,headerLayoutPreset:navigationParams.headerLayoutPreset||headerLayoutPreset,headerLeft:getValue(navigationParams.left||left||leftButton||params.renderLeftButton,state),headerRight:getValue(navigationParams.right||right||rightButton||params.renderRightButton,state),headerStyle:getValue(navigationParams.headerStyle||headerStyle||navigationBarStyle,state),headerTintColor:navBarButtonColor||props.tintColor||navigationParams.tintColor||navigationParams.headerTintColor,headerTitle:getValue(navigationParams.renderTitle||renderTitle||params.renderTitle,state),headerTitleStyle:headerTitleStyle||titleStyle,title:getValue(navigationParams.title||title||getTitle,state)});var NavBarFromParams=navigationParams.renderNavigationBar||navigationParams.navBar;if(NavBarFromParams!=null){if(NavBarFromParams){res.header=function(data){return React.createElement(NavBarFromParams,_extends({navigation:navigation},state,data));};}}else if(NavBar){res.header=function(data){return React.createElement(NavBar,_extends({navigation:navigation},state,data));};}if(typeof navigationParams.panHandlers!=='undefined'){if(navigationParams.panHandlers===null){res.gesturesEnabled=false;}}else if(panHandlers===null){res.gesturesEnabled=false;}if(navigationBarTitleImage){res.headerTitle=React.createElement(Image,{source:navigationBarTitleImage,style:navigationBarTitleImageStyle});}if(tabBarLabel){res.tabBarLabel=tabBarLabel;}if(tabBarIcon||icon){var Icon=tabBarIcon||icon;res.tabBarIcon=function(data){return React.createElement(Icon,_extends({},state,data));};}var componentData={};if(component){for(var _i=0,_arr=['onRight','onLeft','rightButton','leftButton','leftTitle','rightTitle','rightButtonImage','leftButtonImage','rightButtonTextStyle','leftButtonTextStyle','rightButtonIconStyle','leftButtonIconStyle','leftButtonTintColor','rightButtonTintColor'];_i<_arr.length;_i++){var key=_arr[_i];if(component[key]){componentData[key]=component[key];}}}if(rightButtonImage||rightTitle||params.renderRightButton||onRight||navigationParams.onRight||navigationParams.rightTitle||navigationParams.rightButtonImage||rightButtonTextStyle||(drawerImage||drawerIcon)&&!hideDrawerButton&&drawerPosition==='right'){res.headerRight=getValue(navigationParams.right||navigationParams.rightButton||params.renderRightButton,_objectSpread(_objectSpread({},navigationParams),screenProps))||React.createElement(RightNavBarButton,_extends({navigation:navigation},params,navigationParams,componentData));}if(leftButtonImage||backButtonImage||backTitle||leftTitle||params.renderLeftButton||leftButtonTextStyle||renderBackButton||backButtonTextStyle||onLeft||navigationParams.leftTitle||navigationParams.onLeft||navigationParams.leftButtonImage||navigationParams.backButtonImage||navigationParams.backTitle||(drawerImage||drawerIcon)&&!hideDrawerButton&&drawerPosition!=='right'){var _leftButton=navigationParams.left||navigationParams.leftButton||params.renderLeftButton;res.headerLeft=getValue(_leftButton,_objectSpread(_objectSpread(_objectSpread({},params),navigationParams),screenProps))||(onLeft&&(leftTitle||navigationParams.leftTitle||leftButtonImage||navigationParams.leftButtonImage)||drawerImage||drawerIcon)&&React.createElement(LeftNavBarButton,_extends({navigation:navigation},params,navigationParams,componentData))||res.headerLeft||(init?null:!_leftButton&&renderBackButton&&renderBackButton(state)||!_leftButton&&React.createElement(BackNavBarButton,_extends({navigation:navigation},state)))||null;}if(back){res.headerLeft=renderBackButton&&renderBackButton(state)||React.createElement(BackNavBarButton,_extends({navigation:navigation},state));}if(typeof navigationParams.left!=='undefined'||typeof navigationParams.leftButton!=='undefined'||typeof navigationParams.renderLeftButton!=='undefined'){if(navigationParams.left===null||navigationParams.leftButton===null||navigationParams.renderLeftButton===null){res.headerLeft=null;}}var routeParams=navigation.state.routes&&navigation.state.routes[navigation.state.index].params;if(navigationParams.hideTabBar!=null){if(navigationParams.hideTabBar){res.tabBarVisible=false;}}else if(hideTabBar){res.tabBarVisible=false;}else if(routeParams&&routeParams.hideTabBar){res.tabBarVisible=false;}if(navigationParams.hideNavBar!=null){if(navigationParams.hideNavBar){res.header=null;}}else if(hideNavBar){res.header=null;}if(navTransparent){res.headerTransparent=true;res.headerStyle={};}if(backToInitial){var userDefinedTabBarOnPress=res.tabBarOnPress;res.tabBarOnPress=function(data){if(userDefinedTabBarOnPress){console.warn('backToInitial and tabBarOnPress were both defined and might cause unexpected navigation behaviors. I hope you know what you are doing ;-)');userDefinedTabBarOnPress(data);}if(data.navigation&&data.navigation.state.index!==0){data.navigation.dispatch(StackActions.popToTop());}else{data.defaultHandler();}};}return res;};}function originalRouteName(routeName){if(routeName.startsWith('_')){return routeName.substring(1);}return routeName;}function isStatelessComponent(Component){return!Component.prototype||typeof Component.prototype.render!=='function';}function extendProps(props,store){if(!props){return{};}var res=_objectSpread({},props);var _loop=function _loop(transition){if(reservedKeys.indexOf(transition)===-1&&transition.startsWith('on')&&transition.charAt(2)>='A'&&transition.charAt(2)<='Z'&&typeof props[transition]==='string'){if(store[props[transition]]){res[transition]=function(params){return store[props[transition]](params);};}}};for(var _i2=0,_Object$keys=Object.keys(props);_i2<_Object$keys.length;_i2++){var transition=_Object$keys[_i2];_loop(transition);}return res;}function createWrapper(Component,wrapBy,store){if(!Component){return null;}var wrapper=wrapBy||function(props){return props;};if(!isStatelessComponent(Component)){var Wrapped=function(_React$Component){_inherits(Wrapped,_React$Component);var _super=_createSuper(Wrapped);function Wrapped(){var _this;_classCallCheck(this,Wrapped);_this=_super.call(this);_this.onRef=_this.onRef.bind(_assertThisInitialized(_this));return _this;}_createClass(Wrapped,[{key:\"componentDidMount\",value:function componentDidMount(){var navigation=this.props.navigation;if(this.ref&&navigation&&navigation.state&&navigation.state.routeName){store.addRef(originalRouteName(navigation.state.routeName),this.ref);}if(this.ref&&this.ref.onEnter){this.ref.onEnter(navigation&&navigation.state);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var navigation=this.props.navigation;if(this.ref&&navigation&&navigation.state&&navigation.state.routeName){store.deleteRef(originalRouteName(navigation.state.routeName));}if(this.ref&&this.ref.onExit){this.ref.onExit(navigation&&navigation.state);}this.ref=null;}},{key:\"onRef\",value:function onRef(ref){this.ref=ref;}},{key:\"render\",value:function render(){var navigation=this.props.navigation;if(!navigation||!navigation.state){return React.createElement(Component,_extends({ref:this.onRef},this.props));}return React.createElement(Component,_extends({ref:this.onRef},this.props,extendProps(navigation.state.params,store),{name:navigation.state.routeName}));}}]);return Wrapped;}(React.Component);Wrapped.propTypes={navigation:PropTypes.shape().isRequired};return wrapper(Wrapped);}function StatelessWrapped(_ref3){var navigation=_ref3.navigation,props=_objectWithoutProperties(_ref3,[\"navigation\"]);return React.createElement(Component,_extends({},props,{navigation:navigation},extendProps(navigation.state.params,store),{name:navigation.state.routeName}));}StatelessWrapped.propTypes={navigation:PropTypes.shape().isRequired};return wrapper(StatelessWrapped);}function filterParam(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(data.toString()!=='[object Object]'){return{data:data};}var proto=(data||{}).constructor.name;if(!data||proto!=='Object'){return{};}return data;}function uniteParams(routeName,params){var res={};for(var _iterator2=_createForOfIteratorHelperLoose(params),_step2;!(_step2=_iterator2()).done;){var param=_step2.value;if(param){res=_objectSpread(_objectSpread({},res),filterParam(param));}}res.routeName=routeName;return res;}var defaultSuccess=function defaultSuccess(){};var defaultFailure=function defaultFailure(){};var NavigationStore=function(){function NavigationStore(){var _this2=this;_classCallCheck(this,NavigationStore);this.getStateForAction=null;this.reducer=null;this._navigator=null;this.externalDispatch=null;this.externalState=null;this.prevState=null;this.externalAction={};this.refs={};this.states={};this.isLogical={};this.setCustomReducer=function(Navigator){_this2.getStateForAction=Navigator.router.getStateForAction;var reducer=createReducer();Navigator.router.getStateForAction=function(cmd,state){return _this2.reducer?_this2.reducer(state,cmd):reducer(state,cmd);};};this.onEnterHandler=function _callee(currentScene){var handler,success,failure,res;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!_this2.states[currentScene]){_context.next=15;break;}handler=_this2[currentScene+OnEnter];success=_this2.states[currentScene].success||defaultSuccess;failure=_this2.states[currentScene].failure||defaultFailure;if(!handler){_context.next=15;break;}_context.prev=5;_context.next=8;return _regeneratorRuntime.awrap(handler(_this2.currentParams,_this2.state));case 8:res=_context.sent;if(res){success(res);}else{failure();}_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);failure({error:_context.t0.message});case 15:case\"end\":return _context.stop();}}},null,null,[[5,12]],Promise);};this.onExitHandler=function(prevScene){if(prevScene){var exitHandler=_this2[prevScene+OnExit];if(exitHandler){try{var res=exitHandler(_this2.state);if(res instanceof Promise){res.then(defaultSuccess,defaultFailure);}}catch(e){console.error('Error during onExit handler:',e);}}}};this.onNavigationStateChange=function _callee2(prevState,currentState,action){var activeState,currentScene,routeName;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this2.state=currentState;_this2.prevState=prevState;activeState=getActiveState(_this2.state);currentScene=activeState.routeName;_this2.currentParams=_objectSpread(_objectSpread({},activeState.params),action.params);_this2.currentScene=currentScene;_this2.prevScene=_this2.prevState?getActiveState(_this2.prevState).routeName:null;if(_this2.currentScene!==_this2.prevScene){_this2.onExitHandler(_this2.prevScene);setTimeout(function(){return _this2.dispatch({type:ActionConst.FOCUS,routeName:_this2.currentScene,params:_this2.currentParams});});_this2.onEnterHandler(currentScene);}else{routeName=getRouteNameByKey(_this2.state,action.key);if(action.type==='Navigation/DRAWER_OPENED'){_this2.onEnterHandler(routeName);}else if(action.type==='Navigation/DRAWER_CLOSED'){_this2.onExitHandler(routeName);}}if(_this2.onStateChange){_this2.onStateChange(prevState,currentState,action);}case 9:case\"end\":return _context2.stop();}}},null,null,null,Promise);};this.setTopLevelNavigator=function(navigatorRef){_this2._navigator=navigatorRef;};this.addRef=function(name,ref){_this2.refs[name]=ref;};this.deleteRef=function(name){delete _this2.refs[name];};this.create=function(scene){var params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var wrapBy=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(props){return props;};assert(!Array.isArray(scene),'Router should contain only one scene, please wrap your scenes with root Scene ');RightNavBarButton=wrapBy(RightButton);LeftNavBarButton=wrapBy(LeftButton);BackNavBarButton=wrapBy(BackButton);var Navigator=_this2.processScene(scene,params,[],wrapBy);_this2.onNavigationStateChange(null,Navigator.router.getStateForAction(NavigationActions.init()),NavigationActions.init());_this2.setCustomReducer(Navigator);return createAppContainer(Navigator);};this.createAction=function(name){return function(args){if(_this2.isLogical[name]){_this2[name](args);}else{setTimeout(function(){return _this2[name](args);});}};};this.processScene=function(scene){var _ref4;var inheritProps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var clones=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var wrapBy=arguments.length>3?arguments[3]:undefined;assert(scene.props,'props should be defined');if(!scene.props.children){return null;}var res={};var order=[];var _scene$props=scene.props,navigator=_scene$props.navigator,renderer=_scene$props.renderer,contentComponent=_scene$props.contentComponent,drawerWidth=_scene$props.drawerWidth,drawerLockMode=_scene$props.drawerLockMode,tabBarPosition=_scene$props.tabBarPosition,lazy=_scene$props.lazy,duration=_scene$props.duration,parentProps=_objectWithoutProperties(_scene$props,[\"navigator\",\"renderer\",\"contentComponent\",\"drawerWidth\",\"drawerLockMode\",\"tabBarPosition\",\"lazy\",\"duration\"]);var tabs=parentProps.tabs,modal=parentProps.modal,lightbox=parentProps.lightbox,overlay=parentProps.overlay,drawer=parentProps.drawer,transitionConfig=parentProps.transitionConfig,tabBarComponent=parentProps.tabBarComponent;if(scene.type===Modal){modal=true;}else if(scene.type===Drawer){drawer=true;}else if(scene.type===Lightbox){lightbox=true;}else if(scene.type===Tabs){tabs=true;}else if(scene.type===Overlay){overlay=true;}if(duration!==undefined&&!transitionConfig){transitionConfig=function transitionConfig(){return{transitionSpec:{duration:duration,timing:Animated.timing,easing:Easing.step0}};};}var commonProps=_objectSpread(_objectSpread({},inheritProps),parentProps);delete commonProps.children;delete commonProps.component;for(var _i3=0,_Object$keys2=Object.keys(commonProps);_i3<_Object$keys2.length;_i3++){var pkey=_Object$keys2[_i3];if(dontInheritKeys.includes(pkey)&&(pkey==='type'||pkey==='hideNavBar'||!parentProps[pkey])){delete commonProps[pkey];}}if(drawer){commonProps.drawerImage=commonProps.drawerImage||_drawerImage;}var children=!Array.isArray(parentProps.children)?[parentProps.children]:(_ref4=[]).concat.apply(_ref4,_toConsumableArray(parentProps.children));if(!drawer&&!tabs&&!overlay){children.push.apply(children,_toConsumableArray(clones));}for(var _iterator3=_createForOfIteratorHelperLoose(children),_step3;!(_step3=_iterator3()).done;){var child=_step3.value;if(child&&child.props.clone){if(clones.indexOf(child)===-1){clones.push(child);}}}var initialRouteName;var initialRouteParams;for(var _iterator4=_createForOfIteratorHelperLoose(children),_step4;!(_step4=_iterator4()).done;){var _child=_step4.value;if(!_child){continue;}var key=_child.key||\"key\"+(counter+=1);var init=key===children[0].key;assert(reservedKeys.indexOf(key)===-1,\"Scene name cannot be reserved word: \"+_child.key);var _child$props=_child.props,component=_child$props.component,_child$props$type=_child$props.type,type=_child$props$type===void 0?tabs||drawer?'jump':'push':_child$props$type,path=_child$props.path,onEnter=_child$props.onEnter,onExit=_child$props.onExit,on=_child$props.on,failure=_child$props.failure,success=_child$props.success,wrap=_child$props.wrap,_child$props$initial=_child$props.initial,initial=_child$props$initial===void 0?false:_child$props$initial,props=_objectWithoutProperties(_child$props,[\"component\",\"type\",\"path\",\"onEnter\",\"onExit\",\"on\",\"failure\",\"success\",\"wrap\",\"initial\"]);if(!_this2.states[key]){_this2.states[key]={};}for(var _i4=0,_Object$keys3=Object.keys(props);_i4<_Object$keys3.length;_i4++){var transition=_Object$keys3[_i4];if(reservedKeys.indexOf(transition)===-1&&props[transition]instanceof Function){_this2.states[key][transition]=props[transition];}}delete props.children;if(success){_this2.states[key].success=success instanceof Function?success:_this2.createAction(success);}if(failure){_this2.states[key].failure=failure instanceof Function?failure:_this2.createAction(failure);}if(path){_this2.states[key].path=path;}var screen={screen:createWrapper(component,wrapBy,_this2)||_this2.processScene(_child,commonProps,clones)||lightbox&&function(){return null;},navigationOptions:createNavigationOptions(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},commonProps),{},{hideNavBar:parentProps.hideNavBar},getProperties(component)),_child.props),{},{init:init,component:component}))};var wrapNavBar=drawer||tabs&&!navigator&&!renderer||wrap;if(wrap===false||commonProps.wrap===false){wrapNavBar=false;}if(component&&wrapNavBar){res[key]={screen:_this2.processScene({key:key,props:{children:{key:\"_\"+key,props:_objectSpread(_objectSpread({},_child.props),{},{wrap:false})}}},commonProps,clones,wrapBy),navigationOptions:createNavigationOptions(_objectSpread(_objectSpread(_objectSpread({},commonProps),_child.props),{},{hideNavBar:true}))};}else{res[key]=screen;}props.init=true;if(!_this2[key]){_this2.isLogical[key]=!!component;_this2[key]=new Function('actions','props','type',\"return function \"+key.replace(/\\W/g,'_')+\"(params){ actions.execute(type, '\"+key+\"', props, params)}\")(_this2,_objectSpread(_objectSpread({error:''},commonProps),props),type);}if((onEnter||on||component&&component.onEnter)&&!_this2[key+OnEnter]){_this2[key+OnEnter]=onEnter||on||component.onEnter;}if((onExit||component&&component.onExit)&&!_this2[key+OnExit]){_this2[key+OnExit]=onExit||component.onExit;}order.push(key);if(initial||_child.props.initial||!initialRouteName){initialRouteName=key;initialRouteParams=_objectSpread(_objectSpread({},commonProps),props);}}var mode=modal?'modal':'card';var navigationConfig=_objectSpread(_objectSpread({lazy:lazy,initialRouteName:initialRouteName,initialRouteParams:initialRouteParams,contentComponent:contentComponent,order:order},commonProps),{},{navigationOptions:createNavigationOptions(commonProps)});if(navigator){return navigator(res,navigationConfig);}if(renderer){return tabs?createTabNavigatorHOC(renderer)(res,navigationConfig):createStackNavigatorHOC(renderer)(res,navigationConfig);}if(lightbox){return createStackNavigatorHOC(LightboxRenderer)(res,_objectSpread(_objectSpread({mode:mode,initialRouteParams:initialRouteParams,initialRouteName:initialRouteName},commonProps),{},{navigationOptions:createNavigationOptions(commonProps)}));}if(tabs){var createTabNavigator=createMaterialTopTabNavigator;if(tabBarPosition!=='top'){createTabNavigator=createBottomTabNavigator;}return createTabNavigator(res,_objectSpread(_objectSpread({lazy:lazy,tabBarComponent:tabBarComponent,initialRouteName:initialRouteName,initialRouteParams:initialRouteParams,tabBarPosition:tabBarPosition,order:order},commonProps),{},{tabBarOptions:createTabBarOptions(commonProps),navigationOptions:createNavigationOptions(commonProps)}));}if(drawer){var config=_objectSpread({initialRouteName:initialRouteName,contentComponent:contentComponent,order:order,drawerOpenRoute:'DrawerOpen',drawerCloseRoute:'DrawerClose',drawerToggleRoute:'DrawerToggle'},commonProps);if(drawerWidth){config.drawerWidth=drawerWidth;}if(drawerLockMode){config.drawerLockMode=drawerLockMode;}return createDrawerNavigator(res,config);}if(overlay){return createTabNavigatorHOC(OverlayRenderer)(res,_objectSpread(_objectSpread({lazy:lazy,initialRouteName:initialRouteName,contentComponent:contentComponent,initialRouteParams:initialRouteParams,order:order},commonProps),{},{tabBarOptions:createTabBarOptions(commonProps),navigationOptions:createNavigationOptions(commonProps)}));}return createStackNavigator(res,_objectSpread(_objectSpread({mode:mode,initialRouteParams:initialRouteParams,initialRouteName:initialRouteName},commonProps),{},{transitionConfig:transitionConfig,navigationOptions:createNavigationOptions(commonProps)}));};this.dispatch=function(action){if(_this2.externalDispatch){_this2.externalAction=action;_this2.externalDispatch(action);}else if(_this2._navigator){_this2._navigator.dispatch(action);}};this.execute=function(actionType,routeName){for(var _len=arguments.length,params=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){params[_key-2]=arguments[_key];}var res=uniteParams(routeName,params);var overridenType=res.type||actionType;var type=actionMap[overridenType]||overridenType;if(type==='pop'){_this2[type](res);}else{_this2[type](routeName,res);}};this.push=function(routeName,data){var params=filterParam(data);_this2.dispatch({type:StackActions.PUSH,routeName:routeName,params:params});};this.jump=function(routeName,data){var params=filterParam(data);_this2.dispatch({type:NavigationActions.NAVIGATE,routeName:routeName,params:params});};this.drawerOpen=function(){_this2.dispatch(DrawerActions.openDrawer());};this.drawerClose=function(){_this2.dispatch(DrawerActions.closeDrawer());};this.drawerToggle=function(){_this2.dispatch(DrawerActions.toggleDrawer());};this.refresh=function(data){var sceneKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var params=filterParam(data);var _getActiveState=getActiveState(_this2.state),key=_getActiveState.key;_this2.dispatch(NavigationActions.setParams({key:sceneKey||key,params:params}));};this.pop=function(){var _ref5=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},timeout=_ref5.timeout,key=_ref5.key,params=_objectWithoutProperties(_ref5,[\"timeout\",\"key\"]);var res=filterParam(params);if(timeout){setTimeout(function(){return _this2.pop(params);},timeout);}else{_this2.dispatch(NavigationActions.back({key:key}));if(res.refresh){_this2.refresh(res.refresh);}}return true;};this.popTo=function(routeName,data){var params=filterParam(data);_this2.dispatch({type:ActionConst.POP_TO,routeName:routeName,params:params});};this.popAndPush=function(routeName,data){var params=filterParam(data);_this2.dispatch({type:ActionConst.POP_AND_PUSH,routeName:routeName,params:params});};this.replace=function(routeName,data){var params=filterParam(data);_this2.dispatch({type:ActionConst.REPLACE,routeName:routeName,params:params});};this.reset=function(routeName,data){var params=filterParam(data);var parent=getParent(_this2.state,routeName);_this2.dispatch(StackActions.reset({index:0,key:parent?parent.key:null,actions:[NavigationActions.navigate({routeName:routeName,params:params})]}));};}_createClass(NavigationStore,[{key:\"externalState\",set:function set(state){if(state&&this.externalDispatch){this.onNavigationStateChange(this.state,state,this.externalAction);this.state=state;}}}]);return NavigationStore;}();export default new NavigationStore();","map":{"version":3,"sources":["/home/thecoder/Documentos/UVG/Ecofiltro/waterProject/node_modules/react-native-router-flux/src/navigationStore.js"],"names":["React","createAppContainer","NavigationActions","StackActions","createStackNavigator","createDrawerNavigator","DrawerActions","createMaterialTopTabNavigator","createBottomTabNavigator","PropTypes","createReducer","ActionConst","OnEnter","OnExit","assert","LeftButton","RightButton","BackButton","LightboxRenderer","_drawerImage","getActiveState","getParent","getRouteNameByKey","Modal","Lightbox","Drawer","Tabs","Overlay","OverlayRenderer","createStackNavigatorHOC","createTabNavigatorHOC","RightNavBarButton","LeftNavBarButton","BackNavBarButton","counter","actionMap","JUMP","PUSH","REPLACE","BACK","BACK_ACTION","POP_TO","REFRESH","RESET","PUSH_OR_POP","reservedKeys","dontInheritKeys","getValue","value","params","Function","getProperties","component","res","key","children","createTabBarOptions","tabBarStyle","activeTintColor","inactiveTintColor","activeBackgroundColor","inactiveBackgroundColor","showLabel","labelStyle","tabStyle","props","style","createNavigationOptions","back","backButtonImage","backButtonTextStyle","backTitle","backTitleEnabled","backToInitial","drawerIcon","drawerImage","drawerPosition","getTitle","headerLayoutPreset","headerStyle","headerTitleStyle","hideDrawerButton","hideNavBar","hideTabBar","icon","init","left","leftButton","leftButtonImage","leftButtonTextStyle","leftTitle","navBar","navBarButtonColor","navigationBarStyle","navigationBarTitleImage","navigationBarTitleImageStyle","navTransparent","onLeft","onRight","panHandlers","renderBackButton","renderNavigationBar","renderTitle","right","rightButton","rightButtonImage","rightButtonTextStyle","rightTitle","tabBarIcon","tabBarLabel","title","titleStyle","NavBar","navigationOptions","navigation","screenProps","navigationParams","state","headerBackImage","headerBackTitle","headerBackTitleEnabled","headerLeft","renderLeftButton","headerRight","renderRightButton","headerTintColor","tintColor","headerTitle","NavBarFromParams","header","data","gesturesEnabled","Icon","componentData","routeParams","routes","index","tabBarVisible","headerTransparent","userDefinedTabBarOnPress","tabBarOnPress","console","warn","dispatch","popToTop","defaultHandler","originalRouteName","routeName","startsWith","substring","isStatelessComponent","Component","prototype","render","extendProps","store","transition","indexOf","charAt","Object","keys","createWrapper","wrapBy","wrapper","Wrapped","onRef","bind","ref","addRef","onEnter","deleteRef","onExit","propTypes","shape","isRequired","StatelessWrapped","filterParam","toString","proto","constructor","name","uniteParams","param","defaultSuccess","defaultFailure","NavigationStore","getStateForAction","reducer","_navigator","externalDispatch","externalState","prevState","externalAction","refs","states","isLogical","setCustomReducer","Navigator","router","cmd","onEnterHandler","currentScene","handler","success","failure","currentParams","error","message","onExitHandler","prevScene","exitHandler","Promise","then","e","onNavigationStateChange","currentState","action","activeState","setTimeout","type","FOCUS","onStateChange","setTopLevelNavigator","navigatorRef","create","scene","Array","isArray","processScene","createAction","args","inheritProps","clones","order","navigator","renderer","contentComponent","drawerWidth","drawerLockMode","tabBarPosition","lazy","duration","parentProps","tabs","modal","lightbox","overlay","drawer","transitionConfig","tabBarComponent","undefined","transitionSpec","timing","Animated","easing","Easing","step0","commonProps","pkey","includes","concat","push","child","clone","initialRouteName","initialRouteParams","path","on","wrap","initial","screen","wrapNavBar","replace","mode","navigationConfig","createTabNavigator","tabBarOptions","config","drawerOpenRoute","drawerCloseRoute","drawerToggleRoute","execute","actionType","overridenType","jump","NAVIGATE","drawerOpen","openDrawer","drawerClose","closeDrawer","drawerToggle","toggleDrawer","refresh","sceneKey","setParams","pop","timeout","popTo","popAndPush","POP_AND_PUSH","reset","parent","actions","navigate"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Image, Animated, Easing } from 'react-native';\nimport { createAppContainer, NavigationActions, StackActions } from 'react-navigation';\nimport { createStackNavigator } from 'react-navigation-stack';\nimport { createDrawerNavigator, DrawerActions } from 'react-navigation-drawer';\nimport { createMaterialTopTabNavigator, createBottomTabNavigator } from 'react-navigation-tabs';\nimport PropTypes from 'prop-types';\nimport createReducer from './Reducer';\nimport * as ActionConst from './ActionConst';\nimport { OnEnter, OnExit, assert } from './Util';\nimport { LeftButton, RightButton, BackButton } from './NavBar';\nimport LightboxRenderer from './LightboxRenderer';\nimport _drawerImage from '../images/menu_burger.png';\nimport { getActiveState, getParent, getRouteNameByKey } from './State';\nimport Modal from './Modal';\nimport Lightbox from './Lightbox';\nimport Drawer from './Drawer';\nimport Tabs from './Tabs';\nimport Overlay from './Overlay';\nimport OverlayRenderer from './OverlayRenderer';\nimport createStackNavigatorHOC from './createStackNavigatorHOC';\nimport createTabNavigatorHOC from './createTabNavigatorHOC';\n\nlet RightNavBarButton;\nlet LeftNavBarButton;\nlet BackNavBarButton;\nlet counter = 0;\n\nexport const actionMap = {\n  [ActionConst.JUMP]: 'jump',\n  [ActionConst.PUSH]: 'push',\n  [ActionConst.REPLACE]: 'replace',\n  [ActionConst.BACK]: 'pop',\n  [ActionConst.BACK_ACTION]: 'pop',\n  [ActionConst.POP_TO]: 'popTo',\n  [ActionConst.REFRESH]: 'refresh',\n  [ActionConst.RESET]: 'reset',\n  [ActionConst.PUSH_OR_POP]: 'push',\n};\n\nconst reservedKeys = [\n  'addRef',\n  'back',\n  'children',\n  'create',\n  'dispatch',\n  'drawerClose',\n  'drawerOpen',\n  'execute',\n  'left',\n  'leftButton',\n  'navBar',\n  'navigate',\n  'on',\n  'onEnter',\n  'onExit',\n  'onLeft',\n  'onRight',\n  'pop',\n  'popTo',\n  'push',\n  'refresh',\n  'refs',\n  'removeRef',\n  'renderLeftButton',\n  'renderRightButton',\n  'renderTitle',\n  'replace',\n  'right',\n  'rightButton',\n  'run',\n  'setParams',\n  'title',\n];\n\nconst dontInheritKeys = [\n  'backToInitial',\n  'children',\n  'component',\n  'contentComponent',\n  'drawer',\n  'hideNavBar',\n  'hideTabBar',\n  'key',\n  'lightbox',\n  'modal',\n  'navigator',\n  'navTransparent',\n  'overlay',\n  'ref',\n  'style',\n  'tabBarComponent',\n  'tabs',\n  'title',\n  'type',\n];\n\nfunction getValue(value, params) {\n  return value instanceof Function ? value(params) : value;\n}\n\nfunction getProperties(component = {}) {\n  const res = {};\n  for (const key of reservedKeys) {\n    if (component[key]) {\n      res[key] = component[key];\n    }\n  }\n  delete res.children;\n  return res;\n}\nfunction createTabBarOptions({\n  tabBarStyle, activeTintColor, inactiveTintColor, activeBackgroundColor, inactiveBackgroundColor, showLabel, labelStyle, tabStyle, ...props\n}) {\n  return {\n    ...props,\n    style: tabBarStyle,\n    activeTintColor,\n    inactiveTintColor,\n    activeBackgroundColor,\n    inactiveBackgroundColor,\n    showLabel,\n    labelStyle,\n    tabStyle,\n  };\n}\nfunction createNavigationOptions(params) {\n  const {\n    back,\n    backButtonImage,\n    backButtonTextStyle,\n    backTitle,\n    backTitleEnabled,\n    backToInitial,\n    component,\n    drawerIcon,\n    drawerImage,\n    drawerPosition,\n    getTitle,\n    headerLayoutPreset,\n    headerStyle,\n    headerTitleStyle,\n    hideDrawerButton,\n    hideNavBar,\n    hideTabBar,\n    icon,\n    init,\n    left,\n    leftButton,\n    leftButtonImage,\n    leftButtonTextStyle,\n    leftTitle,\n    navBar,\n    navBarButtonColor,\n    navigationBarStyle,\n    navigationBarTitleImage,\n    navigationBarTitleImageStyle,\n    navTransparent,\n    onLeft,\n    onRight,\n    panHandlers,\n    renderBackButton,\n    renderNavigationBar,\n    renderTitle,\n    right,\n    rightButton,\n    rightButtonImage,\n    rightButtonTextStyle,\n    rightTitle,\n    tabBarIcon,\n    tabBarLabel,\n    title,\n    titleStyle,\n    ...props\n  } = params;\n  const NavBar = renderNavigationBar || navBar;\n  if (component && component.navigationOptions) {\n    return component.navigationOptions;\n  }\n  return ({ navigation, screenProps }) => {\n    const navigationParams = navigation.state.params || {};\n    const state = {\n      navigation,\n      ...params,\n      ...navigationParams,\n      ...screenProps,\n    };\n    const res = {\n      ...props,\n      headerBackImage: navigationParams.backButtonImage || backButtonImage,\n      headerBackTitle: getValue(navigationParams.backTitle || backTitle, state),\n      headerBackTitleEnabled: navigationParams.backTitleEnabled || backTitleEnabled,\n      headerLayoutPreset: navigationParams.headerLayoutPreset || headerLayoutPreset,\n      headerLeft: getValue(navigationParams.left || left || leftButton || params.renderLeftButton, state),\n      headerRight: getValue(navigationParams.right || right || rightButton || params.renderRightButton, state),\n      headerStyle: getValue(navigationParams.headerStyle || headerStyle || navigationBarStyle, state),\n      headerTintColor: navBarButtonColor || props.tintColor || navigationParams.tintColor || navigationParams.headerTintColor,\n      headerTitle: getValue(navigationParams.renderTitle || renderTitle || params.renderTitle, state),\n      headerTitleStyle: headerTitleStyle || titleStyle,\n      title: getValue(navigationParams.title || title || getTitle, state),\n    };\n\n    const NavBarFromParams = navigationParams.renderNavigationBar || navigationParams.navBar;\n    if (NavBarFromParams != null) {\n      if (NavBarFromParams) {\n        res.header = data => <NavBarFromParams navigation={navigation} {...state} {...data} />;\n      }\n    } else if (NavBar) {\n      res.header = data => <NavBar navigation={navigation} {...state} {...data} />;\n    }\n\n    if (typeof navigationParams.panHandlers !== 'undefined') {\n      if (navigationParams.panHandlers === null) {\n        res.gesturesEnabled = false;\n      }\n    } else if (panHandlers === null) {\n      res.gesturesEnabled = false;\n    }\n\n    if (navigationBarTitleImage) {\n      res.headerTitle = <Image source={navigationBarTitleImage} style={navigationBarTitleImageStyle} />;\n    }\n\n    if (tabBarLabel) {\n      res.tabBarLabel = tabBarLabel;\n    }\n\n    if (tabBarIcon || icon) {\n      const Icon = tabBarIcon || icon;\n      res.tabBarIcon = data => <Icon {...state} {...data} />;\n    }\n    const componentData = {};\n    // copy all component static functions\n    if (component) {\n      for (const key of [\n        'onRight',\n        'onLeft',\n        'rightButton',\n        'leftButton',\n        'leftTitle',\n        'rightTitle',\n        'rightButtonImage',\n        'leftButtonImage',\n        'rightButtonTextStyle',\n        'leftButtonTextStyle',\n        'rightButtonIconStyle',\n        'leftButtonIconStyle',\n        'leftButtonTintColor',\n        'rightButtonTintColor',\n      ]) {\n        if (component[key]) {\n          componentData[key] = component[key];\n        }\n      }\n    }\n\n    if (\n      rightButtonImage\n      || rightTitle\n      || params.renderRightButton\n      || onRight\n      || navigationParams.onRight\n      || navigationParams.rightTitle\n      || navigationParams.rightButtonImage\n      || rightButtonTextStyle\n      || ((drawerImage || drawerIcon) && !hideDrawerButton && drawerPosition === 'right')\n    ) {\n      res.headerRight = getValue(navigationParams.right || navigationParams.rightButton || params.renderRightButton, { ...navigationParams, ...screenProps }) || (\n        <RightNavBarButton navigation={navigation} {...params} {...navigationParams} {...componentData} />\n      );\n    }\n\n    if (\n      leftButtonImage\n      || backButtonImage\n      || backTitle\n      || leftTitle\n      || params.renderLeftButton\n      || leftButtonTextStyle\n      || renderBackButton\n      || backButtonTextStyle\n      || onLeft\n      || navigationParams.leftTitle\n      || navigationParams.onLeft\n      || navigationParams.leftButtonImage\n      || navigationParams.backButtonImage\n      || navigationParams.backTitle\n      || ((drawerImage || drawerIcon) && !hideDrawerButton && drawerPosition !== 'right')\n    ) {\n      const leftButton = navigationParams.left || navigationParams.leftButton || params.renderLeftButton;\n      res.headerLeft = getValue(leftButton, { ...params, ...navigationParams, ...screenProps })\n        || (((onLeft && (leftTitle || navigationParams.leftTitle || leftButtonImage || navigationParams.leftButtonImage)) || drawerImage || drawerIcon) && (\n          <LeftNavBarButton navigation={navigation} {...params} {...navigationParams} {...componentData} />\n        ))\n        || res.headerLeft\n        || (init ? null : (!leftButton && renderBackButton && renderBackButton(state)) || (!leftButton && <BackNavBarButton navigation={navigation} {...state} />))\n        || null;\n    }\n\n    if (back) {\n      res.headerLeft = (renderBackButton && renderBackButton(state)) || <BackNavBarButton navigation={navigation} {...state} />;\n    }\n\n    if (typeof navigationParams.left !== 'undefined' || typeof navigationParams.leftButton !== 'undefined' || typeof navigationParams.renderLeftButton !== 'undefined') {\n      if (navigationParams.left === null || navigationParams.leftButton === null || navigationParams.renderLeftButton === null) {\n        res.headerLeft = null;\n      }\n    }\n\n    // currect dynamic navigation params has priority over static scene params\n    // but taking them into account only if they are explicitly set (not null or undefined)\n    const routeParams = navigation.state.routes && navigation.state.routes[navigation.state.index].params;\n    if (navigationParams.hideTabBar != null) {\n      if (navigationParams.hideTabBar) {\n        res.tabBarVisible = false;\n      }\n    } else if (hideTabBar) {\n      res.tabBarVisible = false;\n    } else if (routeParams && routeParams.hideTabBar) {\n      res.tabBarVisible = false;\n    }\n\n    if (navigationParams.hideNavBar != null) {\n      if (navigationParams.hideNavBar) {\n        res.header = null;\n      }\n    } else if (hideNavBar) {\n      res.header = null;\n    }\n\n    if (navTransparent) {\n      res.headerTransparent = true;\n      res.headerStyle = {};\n    }\n\n    if (backToInitial) {\n      const userDefinedTabBarOnPress = res.tabBarOnPress;\n      res.tabBarOnPress = (data) => {\n        if (userDefinedTabBarOnPress) {\n          console.warn('backToInitial and tabBarOnPress were both defined and might cause unexpected navigation behaviors. I hope you know what you are doing ;-)');\n          userDefinedTabBarOnPress(data);\n        }\n        if (data.navigation && data.navigation.state.index !== 0) {\n          data.navigation.dispatch(StackActions.popToTop());\n        } else {\n          data.defaultHandler();\n        }\n      };\n    }\n    return res;\n  };\n}\nfunction originalRouteName(routeName) {\n  if (routeName.startsWith('_')) {\n    return routeName.substring(1);\n  }\n  return routeName;\n}\nfunction isStatelessComponent(Component) {\n  return !Component.prototype || typeof Component.prototype.render !== 'function';\n}\nfunction extendProps(props, store: NavigationStore) {\n  if (!props) {\n    return {};\n  }\n  const res = { ...props };\n  for (const transition of Object.keys(props)) {\n    if (\n      reservedKeys.indexOf(transition) === -1\n      && transition.startsWith('on')\n      && transition.charAt(2) >= 'A'\n      && transition.charAt(2) <= 'Z'\n      && typeof props[transition] === 'string'\n    ) {\n      if (store[props[transition]]) {\n        res[transition] = params => store[props[transition]](params);\n      }\n    }\n  }\n  return res;\n}\n// eslint no-param-reassign: \"error\"\nfunction createWrapper(Component, wrapBy, store: NavigationStore) {\n  if (!Component) {\n    return null;\n  }\n  const wrapper = wrapBy || (props => props);\n\n  // detect if the component is not functional stateless\n  // not sure if Component can be string-defined (\"div\") here\n  // may be there is a better way to detect stateless function component, but this should work\n  if (!isStatelessComponent(Component)) {\n    class Wrapped extends React.Component {\n      static propTypes = {\n        navigation: PropTypes.shape().isRequired,\n      };\n\n      constructor() {\n        super();\n        this.onRef = this.onRef.bind(this);\n      }\n\n      componentDidMount() {\n        const { navigation } = this.props;\n        if (this.ref && navigation && navigation.state && navigation.state.routeName) {\n          store.addRef(originalRouteName(navigation.state.routeName), this.ref);\n        }\n        if (this.ref && this.ref.onEnter) {\n          this.ref.onEnter(navigation && navigation.state);\n        }\n      }\n\n      componentWillUnmount() {\n        const { navigation } = this.props;\n        if (this.ref && navigation && navigation.state && navigation.state.routeName) {\n          store.deleteRef(originalRouteName(navigation.state.routeName));\n        }\n        if (this.ref && this.ref.onExit) {\n          this.ref.onExit(navigation && navigation.state);\n        }\n        this.ref = null;\n      }\n\n      onRef(ref) {\n        this.ref = ref;\n      }\n\n      render() {\n        const { navigation } = this.props;\n        if (!navigation || !navigation.state) {\n          return <Component ref={this.onRef} {...this.props} />;\n        }\n        return <Component ref={this.onRef} {...this.props} {...extendProps(navigation.state.params, store)} name={navigation.state.routeName} />;\n      }\n    }\n    return wrapper(Wrapped);\n  }\n\n  // if component is statless function, ref is not supported\n  function StatelessWrapped({ navigation, ...props }) {\n    return <Component {...props} navigation={navigation} {...extendProps(navigation.state.params, store)} name={navigation.state.routeName} />;\n  }\n  StatelessWrapped.propTypes = {\n    navigation: PropTypes.shape().isRequired,\n  };\n  return wrapper(StatelessWrapped);\n}\n\nfunction filterParam(data = {}) {\n  if (data.toString() !== '[object Object]') {\n    return { data };\n  }\n  const proto = (data || {}).constructor.name;\n  // avoid passing React Native parameters\n  if (!data || proto !== 'Object') {\n    return {};\n  }\n  return data;\n}\n\nfunction uniteParams(routeName, params) {\n  let res = {};\n  for (const param of params) {\n    if (param) {\n      res = { ...res, ...filterParam(param) };\n    }\n  }\n  res.routeName = routeName;\n  return res;\n}\n\nconst defaultSuccess = () => {};\nconst defaultFailure = () => {};\n\nclass NavigationStore {\n  getStateForAction = null;\n\n  reducer = null;\n\n  _navigator = null;\n\n  externalDispatch = null;\n\n  externalState = null;\n\n  prevState = null;\n\n  externalAction = {};\n\n  refs = {};\n\n  states = {};\n\n  isLogical = {};\n\n  currentScene;\n\n  prevScene;\n\n  currentParams;\n\n  onStateChange;\n\n  set externalState(state) {\n    if (state && this.externalDispatch) {\n      this.onNavigationStateChange(this.state, state, this.externalAction);\n      this.state = state;\n    }\n  }\n\n  setCustomReducer = (Navigator) => {\n    this.getStateForAction = Navigator.router.getStateForAction;\n    const reducer = createReducer();\n    Navigator.router.getStateForAction = (cmd, state) => (this.reducer ? this.reducer(state, cmd) : reducer(state, cmd));\n  };\n\n  onEnterHandler = async (currentScene) => {\n    if (this.states[currentScene]) {\n      const handler = this[currentScene + OnEnter];\n      const success = this.states[currentScene].success || defaultSuccess;\n      const failure = this.states[currentScene].failure || defaultFailure;\n      if (handler) {\n        try {\n          const res = await handler(this.currentParams, this.state);\n          if (res) {\n            success(res);\n          } else {\n            failure();\n          }\n        } catch (e) {\n          failure({ error: e.message });\n        }\n      }\n    }\n  };\n\n  onExitHandler = (prevScene) => {\n    if (prevScene) {\n      const exitHandler = this[prevScene + OnExit];\n      if (exitHandler) {\n        try {\n          const res = exitHandler(this.state);\n          if (res instanceof Promise) {\n            res.then(defaultSuccess, defaultFailure);\n          }\n        } catch (e) {\n          console.error('Error during onExit handler:', e);\n        }\n      }\n    }\n  };\n\n  onNavigationStateChange = async (prevState, currentState, action) => {\n    this.state = currentState;\n    this.prevState = prevState;\n    const activeState = getActiveState(this.state);\n    const currentScene = activeState.routeName;\n    this.currentParams = { ...activeState.params, ...action.params };\n    this.currentScene = currentScene;\n    this.prevScene = this.prevState ? getActiveState(this.prevState).routeName : null;\n    if (this.currentScene !== this.prevScene) {\n      // run onExit for old scene\n      this.onExitHandler(this.prevScene);\n      setTimeout(() => this.dispatch({\n        type: ActionConst.FOCUS,\n        routeName: this.currentScene,\n        params: this.currentParams,\n      }));\n      this.onEnterHandler(currentScene);\n    } else {\n      const routeName = getRouteNameByKey(this.state, action.key);\n      if (action.type === 'Navigation/DRAWER_OPENED') {\n        this.onEnterHandler(routeName);\n      } else if (action.type === 'Navigation/DRAWER_CLOSED') {\n        this.onExitHandler(routeName);\n      }\n    }\n    if (this.onStateChange) {\n      this.onStateChange(prevState, currentState, action);\n    }\n  };\n\n  setTopLevelNavigator = (navigatorRef) => {\n    this._navigator = navigatorRef;\n  };\n\n  addRef = (name, ref) => {\n    this.refs[name] = ref;\n  };\n\n  deleteRef = (name) => {\n    delete this.refs[name];\n  };\n\n  create = (scene: Scene, params = {}, wrapBy = props => props) => {\n    assert(!Array.isArray(scene), 'Router should contain only one scene, please wrap your scenes with root Scene ');\n    RightNavBarButton = wrapBy(RightButton);\n    LeftNavBarButton = wrapBy(LeftButton);\n    BackNavBarButton = wrapBy(BackButton);\n    const Navigator = this.processScene(scene, params, [], wrapBy);\n    // set initial state\n    this.onNavigationStateChange(null, Navigator.router.getStateForAction(NavigationActions.init()), NavigationActions.init());\n    this.setCustomReducer(Navigator);\n\n    return createAppContainer(Navigator);\n  };\n\n  createAction = name => (args) => {\n    // console.log(`Transition to state=${name}`);\n    if (this.isLogical[name]) {\n      this[name](args);\n    } else {\n      setTimeout(() => this[name](args));\n    }\n  };\n\n  processScene = (scene: Scene, inheritProps = {}, clones = [], wrapBy) => {\n    assert(scene.props, 'props should be defined');\n    if (!scene.props.children) {\n      return null;\n    }\n    const res = {};\n    const order = [];\n    const {\n      navigator, renderer, contentComponent, drawerWidth, drawerLockMode, tabBarPosition, lazy, duration, ...parentProps\n    } = scene.props;\n    let {\n      tabs, modal, lightbox, overlay, drawer, transitionConfig, tabBarComponent,\n    } = parentProps;\n    if (scene.type === Modal) {\n      modal = true;\n    } else if (scene.type === Drawer) {\n      drawer = true;\n    } else if (scene.type === Lightbox) {\n      lightbox = true;\n    } else if (scene.type === Tabs) {\n      tabs = true;\n    } else if (scene.type === Overlay) {\n      overlay = true;\n    }\n\n    if (duration !== undefined && !transitionConfig) {\n      transitionConfig = () => ({\n        transitionSpec: {\n          duration,\n          timing: Animated.timing,\n          easing: Easing.step0,\n        },\n      });\n    }\n\n    const commonProps = { ...inheritProps, ...parentProps };\n    delete commonProps.children;\n    delete commonProps.component;\n    // add inherit props\n    for (const pkey of Object.keys(commonProps)) {\n      if (dontInheritKeys.includes(pkey) && (pkey === 'type' || pkey === 'hideNavBar' || !parentProps[pkey])) {\n        delete commonProps[pkey];\n      }\n    }\n\n    if (drawer) {\n      commonProps.drawerImage = commonProps.drawerImage || _drawerImage;\n    }\n\n    const children = !Array.isArray(parentProps.children) ? [parentProps.children] : [].concat(...parentProps.children);\n    // add clone scenes\n    if (!drawer && !tabs && !overlay) {\n      children.push(...clones);\n    }\n    // add all clones\n    for (const child of children) {\n      if (child && child.props.clone) {\n        if (clones.indexOf(child) === -1) {\n          clones.push(child);\n        }\n      }\n    }\n    let initialRouteName;\n    let initialRouteParams;\n    for (const child of children) {\n      // allow null/false child, useful for conditionals\n      if (!child) {\n        continue;\n      }\n      const key = child.key || `key${(counter += 1)}`;\n      const init = key === children[0].key;\n      assert(reservedKeys.indexOf(key) === -1, `Scene name cannot be reserved word: ${child.key}`);\n      const {\n        component, type = tabs || drawer ? 'jump' : 'push', path, onEnter, onExit, on, failure, success, wrap, initial = false, ...props\n      } = child.props;\n      if (!this.states[key]) {\n        this.states[key] = {};\n      }\n      for (const transition of Object.keys(props)) {\n        if (reservedKeys.indexOf(transition) === -1 && props[transition] instanceof Function) {\n          this.states[key][transition] = props[transition];\n        }\n      }\n      delete props.children;\n      if (success) {\n        this.states[key].success = success instanceof Function ? success : this.createAction(success);\n      }\n      if (failure) {\n        this.states[key].failure = failure instanceof Function ? failure : this.createAction(failure);\n      }\n      if (path) {\n        this.states[key].path = path;\n      }\n      // console.log(`KEY ${key} LEGACY {legacy} PATH ${path} DRAWER ${drawer} TABS ${tabs} WRAP ${wrap}`, JSON.stringify(commonProps));\n      const screen = {\n        screen: createWrapper(component, wrapBy, this) || this.processScene(child, commonProps, clones) || (lightbox && (() => null)),\n        navigationOptions: createNavigationOptions({\n          ...commonProps,\n          hideNavBar: parentProps.hideNavBar,\n          ...getProperties(component),\n          ...child.props,\n          init,\n          component,\n        }),\n      };\n\n      // wrap component inside own navbar for tabs/drawer parent controllers\n      // don't wrap child scenes for custom navigators/renderers\n      let wrapNavBar = drawer || (tabs && !navigator && !renderer) || wrap;\n      if (wrap === false || commonProps.wrap === false) {\n        wrapNavBar = false;\n      }\n      if (component && wrapNavBar) {\n        res[key] = {\n          screen: this.processScene(\n            {\n              key,\n              props: {\n                children: {\n                  key: `_${key}`,\n                  props: { ...child.props, wrap: false },\n                },\n              },\n            },\n            commonProps,\n            clones,\n            wrapBy,\n          ),\n          navigationOptions: createNavigationOptions({\n            ...commonProps,\n            ...child.props,\n            hideNavBar: true,\n          }),\n        };\n      } else {\n        res[key] = screen;\n      }\n\n      // a bit of magic, create all 'actions'-shortcuts inside navigationStore\n      props.init = true;\n      if (!this[key]) {\n        this.isLogical[key] = !!component;\n        this[key] = new Function(\n          'actions',\n          'props',\n          'type',\n          `return function ${\n            key.replace(/\\W/g, '_') // eslint-disable-line no-new-func\n          }(params){ actions.execute(type, '${key}', props, params)}`,\n        )(this, { error: '', ...commonProps, ...props }, type);\n      }\n\n      if ((onEnter || on || (component && component.onEnter)) && !this[key + OnEnter]) {\n        this[key + OnEnter] = onEnter || on || component.onEnter;\n      }\n\n      if ((onExit || (component && component.onExit)) && !this[key + OnExit]) {\n        this[key + OnExit] = onExit || component.onExit;\n      }\n\n      order.push(key);\n      if (initial || child.props.initial || !initialRouteName) {\n        initialRouteName = key;\n        initialRouteParams = { ...commonProps, ...props };\n      }\n    }\n    const mode = modal ? 'modal' : 'card';\n    const navigationConfig = {\n      lazy,\n      initialRouteName,\n      initialRouteParams,\n      contentComponent,\n      order,\n      ...commonProps,\n      navigationOptions: createNavigationOptions(commonProps),\n    };\n    if (navigator) {\n      return navigator(res, navigationConfig);\n    }\n    if (renderer) {\n      return tabs ? createTabNavigatorHOC(renderer)(res, navigationConfig) : createStackNavigatorHOC(renderer)(res, navigationConfig);\n    }\n    if (lightbox) {\n      return createStackNavigatorHOC(LightboxRenderer)(res, {\n        mode,\n        initialRouteParams,\n        initialRouteName,\n        ...commonProps,\n        navigationOptions: createNavigationOptions(commonProps),\n      });\n    }\n\n    if (tabs) {\n      let createTabNavigator = createMaterialTopTabNavigator;\n      if (tabBarPosition !== 'top') {\n        createTabNavigator = createBottomTabNavigator;\n      }\n\n      return createTabNavigator(res, {\n        lazy,\n        tabBarComponent,\n        initialRouteName,\n        initialRouteParams,\n        tabBarPosition,\n        order,\n        ...commonProps,\n        tabBarOptions: createTabBarOptions(commonProps),\n        navigationOptions: createNavigationOptions(commonProps),\n      });\n    }\n\n    if (drawer) {\n      const config = {\n        initialRouteName,\n        contentComponent,\n        order,\n        drawerOpenRoute: 'DrawerOpen',\n        drawerCloseRoute: 'DrawerClose',\n        drawerToggleRoute: 'DrawerToggle',\n        ...commonProps,\n      };\n      if (drawerWidth) {\n        config.drawerWidth = drawerWidth;\n      }\n      if (drawerLockMode) {\n        config.drawerLockMode = drawerLockMode;\n      }\n      return createDrawerNavigator(res, config);\n    }\n\n    if (overlay) {\n      return createTabNavigatorHOC(OverlayRenderer)(res, {\n        lazy,\n        initialRouteName,\n        contentComponent,\n        initialRouteParams,\n        order,\n        ...commonProps,\n        tabBarOptions: createTabBarOptions(commonProps),\n        navigationOptions: createNavigationOptions(commonProps),\n      });\n    }\n    return createStackNavigator(res, {\n      mode,\n      initialRouteParams,\n      initialRouteName,\n      ...commonProps,\n      transitionConfig,\n      navigationOptions: createNavigationOptions(commonProps),\n    });\n  };\n\n  dispatch = (action) => {\n    if (this.externalDispatch) {\n      this.externalAction = action;\n      this.externalDispatch(action);\n    } else if (this._navigator) {\n      this._navigator.dispatch(action);\n    }\n  };\n\n  execute = (actionType, routeName, ...params) => {\n    const res = uniteParams(routeName, params);\n    const overridenType = res.type || actionType;\n    const type = actionMap[overridenType] || overridenType;\n    if (type === 'pop') {\n      this[type](res);\n    } else {\n      this[type](routeName, res);\n    }\n  };\n\n  push = (routeName, data) => {\n    const params = filterParam(data);\n    this.dispatch({ type: StackActions.PUSH, routeName, params });\n  };\n\n  jump = (routeName, data) => {\n    const params = filterParam(data);\n    this.dispatch({ type: NavigationActions.NAVIGATE, routeName, params });\n  };\n\n  drawerOpen = () => {\n    this.dispatch(DrawerActions.openDrawer());\n  };\n\n  drawerClose = () => {\n    this.dispatch(DrawerActions.closeDrawer());\n  };\n\n  drawerToggle = () => {\n    this.dispatch(DrawerActions.toggleDrawer());\n  };\n\n  refresh = (data, sceneKey = null) => {\n    const params = filterParam(data);\n    const { key } = getActiveState(this.state);\n    this.dispatch(\n      NavigationActions.setParams({\n        key: sceneKey || key,\n        params,\n      }),\n    );\n  };\n\n  pop = ({ timeout, key, ...params } = {}) => {\n    const res = filterParam(params);\n    if (timeout) {\n      setTimeout(() => this.pop(params), timeout);\n    } else {\n      this.dispatch(NavigationActions.back({ key }));\n      if (res.refresh) {\n        this.refresh(res.refresh);\n      }\n    }\n    return true;\n  };\n\n  popTo = (routeName, data) => {\n    const params = filterParam(data);\n    this.dispatch({ type: ActionConst.POP_TO, routeName, params });\n  };\n\n  popAndPush = (routeName, data) => {\n    const params = filterParam(data);\n    this.dispatch({ type: ActionConst.POP_AND_PUSH, routeName, params });\n  };\n\n  replace = (routeName, data) => {\n    const params = filterParam(data);\n    this.dispatch({ type: ActionConst.REPLACE, routeName, params });\n  };\n\n  reset = (routeName, data) => {\n    const params = filterParam(data);\n    const parent = getParent(this.state, routeName);\n    this.dispatch(\n      StackActions.reset({\n        index: 0,\n        key: parent ? parent.key : null,\n        actions: [\n          NavigationActions.navigate({\n            routeName,\n            params,\n          }),\n        ],\n      }),\n    );\n  };\n}\n\nexport default new NavigationStore();\n"]},"metadata":{},"sourceType":"module"}