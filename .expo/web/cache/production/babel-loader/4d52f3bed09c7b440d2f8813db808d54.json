{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import ViewPropTypes from\"react-native-web/dist/exports/ViewPropTypes\";import BackHandler from\"react-native-web/dist/exports/BackHandler\";import Linking from\"react-native-web/dist/exports/Linking\";import PropTypes from'prop-types';import navigationStore from\"./navigationStore\";import pathParser from\"./pathParser\";var App=function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onBackPress=function(){return navigationStore.pop();};_this.handleDeepURL=function(e){return _this.parseDeepURL(e.url);};_this.parseDeepURL=function(url){if(!url){return;}var cleanUrl=_this.props.uriPrefix?url.split(_this.props.uriPrefix)[1]:url;if(!cleanUrl){return;}var allPaths=Object.values(navigationStore.states).map(function(obj){return obj.path;}).filter(function(path){return path;});var parsedPath=pathParser(cleanUrl,allPaths);if(!parsedPath){return;}var path=parsedPath.path,params=parsedPath.params;var actionKey=Object.entries(navigationStore.states).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),value=_ref2[1];return value.path===path;}).map(function(_ref3){var _ref4=_slicedToArray(_ref3,1),key=_ref4[0];return key;}).find(function(key){return key;});if(_this.props.onDeepLink){_this.props.onDeepLink({url:url,action:actionKey,params:params});}else if(actionKey&&navigationStore[actionKey]){navigationStore[actionKey](params);}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;BackHandler.addEventListener('hardwareBackPress',this.props.backAndroidHandler||this.onBackPress);Linking.getInitialURL().then(function(url){return _this2.parseDeepURL(url);});Linking.addEventListener('url',this.handleDeepURL);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){BackHandler.removeEventListener('hardwareBackPress',this.props.backAndroidHandler||this.onBackPress);Linking.removeEventListener('url',this.handleDeepURL);}},{key:\"render\",value:function render(){var _this$props=this.props,dispatch=_this$props.dispatch,state=_this$props.state,AppNavigator=_this$props.navigator;if(dispatch&&state){navigationStore.externalDispatch=dispatch;navigationStore.externalState=state;return React.createElement(AppNavigator,{dispatch:navigationStore.dispatch,state:navigationStore.state,ref:function ref(navigatorRef){navigationStore.setTopLevelNavigator(navigatorRef);}});}return React.createElement(AppNavigator,{onNavigationStateChange:navigationStore.onNavigationStateChange,ref:function ref(navigatorRef){navigationStore.setTopLevelNavigator(navigatorRef);}});}}]);return App;}(React.Component);App.propTypes={navigator:PropTypes.func,backAndroidHandler:PropTypes.func,uriPrefix:PropTypes.string,onDeepLink:PropTypes.func};App.defaultProps={navigator:null,backAndroidHandler:null,uriPrefix:null,onDeepLink:null};var Router=function Router(_ref5){var createReducer=_ref5.createReducer,sceneStyle=_ref5.sceneStyle,onStateChange=_ref5.onStateChange,scenes=_ref5.scenes,uriPrefix=_ref5.uriPrefix,navigator=_ref5.navigator,getSceneStyle=_ref5.getSceneStyle,children=_ref5.children,onDeepLink=_ref5.onDeepLink,wrapBy=_ref5.wrapBy,props=_objectWithoutProperties(_ref5,[\"createReducer\",\"sceneStyle\",\"onStateChange\",\"scenes\",\"uriPrefix\",\"navigator\",\"getSceneStyle\",\"children\",\"onDeepLink\",\"wrapBy\"]);var data=_objectSpread({},props);if(getSceneStyle){data.cardStyle=getSceneStyle(props);}if(sceneStyle){data.cardStyle=sceneStyle;}var AppNavigator=scenes||navigator||navigationStore.create(children,data,wrapBy);navigationStore.reducer=createReducer&&createReducer(props);if(onStateChange){navigationStore.onStateChange=onStateChange;}return React.createElement(App,_extends({},props,{onDeepLink:onDeepLink,navigator:AppNavigator,uriPrefix:uriPrefix}));};Router.propTypes={onStateChange:PropTypes.func,scenes:PropTypes.func,navigator:PropTypes.func,wrapBy:PropTypes.func,getSceneStyle:PropTypes.func,sceneStyle:ViewPropTypes.style,createReducer:PropTypes.func,children:PropTypes.element,uriPrefix:PropTypes.string,onDeepLink:PropTypes.func};Router.defaultProps={onStateChange:null,scenes:null,navigator:null,wrapBy:function wrapBy(props){return props;},getSceneStyle:null,sceneStyle:null,children:null,uriPrefix:null,onDeepLink:null};export default Router;","map":{"version":3,"sources":["/home/thecoder/Documentos/UVG/Ecofiltro/waterProject/node_modules/react-native-router-flux/src/Router.js"],"names":["React","PropTypes","navigationStore","pathParser","App","onBackPress","pop","handleDeepURL","e","parseDeepURL","url","cleanUrl","props","uriPrefix","split","allPaths","Object","values","states","map","obj","path","filter","parsedPath","params","actionKey","entries","value","key","find","onDeepLink","action","BackHandler","addEventListener","backAndroidHandler","Linking","getInitialURL","then","removeEventListener","dispatch","state","AppNavigator","navigator","externalDispatch","externalState","navigatorRef","setTopLevelNavigator","onNavigationStateChange","Component","propTypes","func","string","defaultProps","Router","createReducer","sceneStyle","onStateChange","scenes","getSceneStyle","children","wrapBy","data","cardStyle","create","reducer","ViewPropTypes","style","element"],"mappings":"69DAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,C,qMAEA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,eAAP,yBACA,MAAOC,CAAAA,UAAP,oB,GAEMC,CAAAA,G,8SA6BJC,W,CAAc,iBAAMH,CAAAA,eAAe,CAACI,GAAhB,EAAN,E,OAEdC,a,CAAgB,SAAAC,CAAC,QAAI,OAAKC,YAAL,CAAkBD,CAAC,CAACE,GAApB,CAAJ,E,OAEjBD,Y,CAAe,SAACC,GAAD,CAAS,CAEtB,GAAI,CAACA,GAAL,CAAU,CACR,OACD,CAGD,GAAMC,CAAAA,QAAQ,CAAG,MAAKC,KAAL,CAAWC,SAAX,CAAuBH,GAAG,CAACI,KAAJ,CAAU,MAAKF,KAAL,CAAWC,SAArB,EAAgC,CAAhC,CAAvB,CAA4DH,GAA7E,CAEA,GAAI,CAACC,QAAL,CAAe,CACb,OACD,CAED,GAAMI,CAAAA,QAAQ,CAAGC,MAAM,CAACC,MAAP,CAAcf,eAAe,CAACgB,MAA9B,EACdC,GADc,CACV,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAR,EADO,EAEdC,MAFc,CAEP,SAAAD,IAAI,QAAIA,CAAAA,IAAJ,EAFG,CAAjB,CAIA,GAAME,CAAAA,UAAU,CAAGpB,UAAU,CAACQ,QAAD,CAAWI,QAAX,CAA7B,CAGA,GAAI,CAACQ,UAAL,CAAiB,CACf,OACD,CAtBqB,GAyBdF,CAAAA,IAzBc,CAyBGE,UAzBH,CAyBdF,IAzBc,CAyBRG,MAzBQ,CAyBGD,UAzBH,CAyBRC,MAzBQ,CA4BtB,GAAMC,CAAAA,SAAS,CAAGT,MAAM,CAACU,OAAP,CAAexB,eAAe,CAACgB,MAA/B,EACfI,MADe,CACR,gDAAIK,KAAJ,gBAAeA,CAAAA,KAAK,CAACN,IAAN,GAAeA,IAA9B,EADQ,EAEfF,GAFe,CAEX,kDAAES,GAAF,gBAAWA,CAAAA,GAAX,EAFW,EAGfC,IAHe,CAGV,SAAAD,GAAG,QAAIA,CAAAA,GAAJ,EAHO,CAAlB,CAKA,GAAI,MAAKhB,KAAL,CAAWkB,UAAf,CAA2B,CACzB,MAAKlB,KAAL,CAAWkB,UAAX,CAAsB,CAAEpB,GAAG,CAAHA,GAAF,CAAOqB,MAAM,CAAEN,SAAf,CAA0BD,MAAM,CAANA,MAA1B,CAAtB,EACD,CAFD,IAEO,IAAIC,SAAS,EAAIvB,eAAe,CAACuB,SAAD,CAAhC,CAA6C,CAElDvB,eAAe,CAACuB,SAAD,CAAf,CAA2BD,MAA3B,EACD,CACF,C,4FAzDmB,iBAClBQ,WAAW,CAACC,gBAAZ,CAA6B,mBAA7B,CAAkD,KAAKrB,KAAL,CAAWsB,kBAAX,EAAiC,KAAK7B,WAAxF,EAGA8B,OAAO,CAACC,aAAR,GAAwBC,IAAxB,CAA6B,SAAA3B,GAAG,QAAI,CAAA,MAAI,CAACD,YAAL,CAAkBC,GAAlB,CAAJ,EAAhC,EAEAyB,OAAO,CAACF,gBAAR,CAAyB,KAAzB,CAAgC,KAAK1B,aAArC,EACD,C,mEAEsB,CACrByB,WAAW,CAACM,mBAAZ,CAAgC,mBAAhC,CAAqD,KAAK1B,KAAL,CAAWsB,kBAAX,EAAiC,KAAK7B,WAA3F,EACA8B,OAAO,CAACG,mBAAR,CAA4B,KAA5B,CAAmC,KAAK/B,aAAxC,EACD,C,uCA+CQ,iBAC8C,KAAKK,KADnD,CACC2B,QADD,aACCA,QADD,CACWC,KADX,aACWA,KADX,CAC6BC,YAD7B,aACkBC,SADlB,CAEP,GAAIH,QAAQ,EAAIC,KAAhB,CAAuB,CACrBtC,eAAe,CAACyC,gBAAhB,CAAmCJ,QAAnC,CACArC,eAAe,CAAC0C,aAAhB,CAAgCJ,KAAhC,CACA,MACE,qBAAC,YAAD,EACE,QAAQ,CAAEtC,eAAe,CAACqC,QAD5B,CAEE,KAAK,CAAErC,eAAe,CAACsC,KAFzB,CAGE,GAAG,CAAE,aAACK,YAAD,CAAkB,CACrB3C,eAAe,CAAC4C,oBAAhB,CAAqCD,YAArC,EACD,CALH,EADF,CASD,CACD,MACE,qBAAC,YAAD,EACE,uBAAuB,CAAE3C,eAAe,CAAC6C,uBAD3C,CAEE,GAAG,CAAE,aAACF,YAAD,CAAkB,CACrB3C,eAAe,CAAC4C,oBAAhB,CAAqCD,YAArC,EACD,CAJH,EADF,CAQD,C,iBAjGe7C,KAAK,CAACgD,S,EAAlB5C,G,CACG6C,S,CAAY,CACjBP,SAAS,CAAEzC,SAAS,CAACiD,IADJ,CAEjBhB,kBAAkB,CAAEjC,SAAS,CAACiD,IAFb,CAGjBrC,SAAS,CAAEZ,SAAS,CAACkD,MAHJ,CAIjBrB,UAAU,CAAE7B,SAAS,CAACiD,IAJL,C,CADf9C,G,CAQGgD,Y,CAAe,CACpBV,SAAS,CAAE,IADS,CAEpBR,kBAAkB,CAAE,IAFA,CAGpBrB,SAAS,CAAE,IAHS,CAIpBiB,UAAU,CAAE,IAJQ,C,CA4FxB,GAAMuB,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,OAET,IADJC,CAAAA,aACI,OADJA,aACI,CADWC,UACX,OADWA,UACX,CADuBC,aACvB,OADuBA,aACvB,CADsCC,MACtC,OADsCA,MACtC,CAD8C5C,SAC9C,OAD8CA,SAC9C,CADyD6B,SACzD,OADyDA,SACzD,CADoEgB,aACpE,OADoEA,aACpE,CADmFC,QACnF,OADmFA,QACnF,CAD6F7B,UAC7F,OAD6FA,UAC7F,CADyG8B,MACzG,OADyGA,MACzG,CADoHhD,KACpH,kKACJ,GAAMiD,CAAAA,IAAI,kBAAQjD,KAAR,CAAV,CACA,GAAI8C,aAAJ,CAAmB,CACjBG,IAAI,CAACC,SAAL,CAAiBJ,aAAa,CAAC9C,KAAD,CAA9B,CACD,CACD,GAAI2C,UAAJ,CAAgB,CACdM,IAAI,CAACC,SAAL,CAAiBP,UAAjB,CACD,CACD,GAAMd,CAAAA,YAAY,CAAGgB,MAAM,EAAIf,SAAV,EAAuBxC,eAAe,CAAC6D,MAAhB,CAAuBJ,QAAvB,CAAiCE,IAAjC,CAAuCD,MAAvC,CAA5C,CACA1D,eAAe,CAAC8D,OAAhB,CAA0BV,aAAa,EAAIA,aAAa,CAAC1C,KAAD,CAAxD,CACA,GAAI4C,aAAJ,CAAmB,CACjBtD,eAAe,CAACsD,aAAhB,CAAgCA,aAAhC,CACD,CACD,MAAO,qBAAC,GAAD,aAAS5C,KAAT,EAAgB,UAAU,CAAEkB,UAA5B,CAAwC,SAAS,CAAEW,YAAnD,CAAiE,SAAS,CAAE5B,SAA5E,GAAP,CACD,CAhBD,CAiBAwC,MAAM,CAACJ,SAAP,CAAmB,CACjBO,aAAa,CAAEvD,SAAS,CAACiD,IADR,CAEjBO,MAAM,CAAExD,SAAS,CAACiD,IAFD,CAGjBR,SAAS,CAAEzC,SAAS,CAACiD,IAHJ,CAIjBU,MAAM,CAAE3D,SAAS,CAACiD,IAJD,CAKjBQ,aAAa,CAAEzD,SAAS,CAACiD,IALR,CAMjBK,UAAU,CAAEU,aAAa,CAACC,KANT,CAOjBZ,aAAa,CAAErD,SAAS,CAACiD,IAPR,CAQjBS,QAAQ,CAAE1D,SAAS,CAACkE,OARH,CASjBtD,SAAS,CAAEZ,SAAS,CAACkD,MATJ,CAUjBrB,UAAU,CAAE7B,SAAS,CAACiD,IAVL,CAAnB,CAYAG,MAAM,CAACD,YAAP,CAAsB,CACpBI,aAAa,CAAE,IADK,CAEpBC,MAAM,CAAE,IAFY,CAGpBf,SAAS,CAAE,IAHS,CAIpBkB,MAAM,CAAE,gBAAAhD,KAAK,QAAIA,CAAAA,KAAJ,EAJO,CAKpB8C,aAAa,CAAE,IALK,CAMpBH,UAAU,CAAE,IANQ,CAOpBI,QAAQ,CAAE,IAPU,CAQpB9C,SAAS,CAAE,IARS,CASpBiB,UAAU,CAAE,IATQ,CAAtB,CAYA,cAAeuB,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport { ViewPropTypes, BackHandler, Linking } from 'react-native';\nimport PropTypes from 'prop-types';\nimport navigationStore from './navigationStore';\nimport pathParser from './pathParser';\n\nclass App extends React.Component {\n  static propTypes = {\n    navigator: PropTypes.func,\n    backAndroidHandler: PropTypes.func,\n    uriPrefix: PropTypes.string,\n    onDeepLink: PropTypes.func,\n  };\n\n  static defaultProps = {\n    navigator: null,\n    backAndroidHandler: null,\n    uriPrefix: null,\n    onDeepLink: null,\n  };\n\n  componentDidMount() {\n    BackHandler.addEventListener('hardwareBackPress', this.props.backAndroidHandler || this.onBackPress);\n\n    // If the app was \"woken up\" by an external route.\n    Linking.getInitialURL().then(url => this.parseDeepURL(url));\n    // Add an event listener for further deep linking.\n    Linking.addEventListener('url', this.handleDeepURL);\n  }\n\n  componentWillUnmount() {\n    BackHandler.removeEventListener('hardwareBackPress', this.props.backAndroidHandler || this.onBackPress);\n    Linking.removeEventListener('url', this.handleDeepURL);\n  }\n\n  onBackPress = () => navigationStore.pop();\n\n  handleDeepURL = e => this.parseDeepURL(e.url);\n\n  parseDeepURL = (url) => {\n    // If there is no url, then return.\n    if (!url) {\n      return;\n    }\n\n    // Clean the url with the given prefix.\n    const cleanUrl = this.props.uriPrefix ? url.split(this.props.uriPrefix)[1] : url;\n    // Skip for uriPrefix which not registered\n    if (!cleanUrl) {\n      return;\n    }\n    // Build an array of paths for every scene.\n    const allPaths = Object.values(navigationStore.states)\n      .map(obj => obj.path)\n      .filter(path => path);\n    // Try to match the url against the set of paths and parse the url parameters.\n    const parsedPath = pathParser(cleanUrl, allPaths);\n\n    // If the url could not be matched, then return.\n    if (!parsedPath) {\n      return;\n    }\n\n    // Destructure the matched path and the parsed url parameters.\n    const { path, params } = parsedPath;\n\n    // Get the action from the scene associated with the matched path.\n    const actionKey = Object.entries(navigationStore.states)\n      .filter(([, value]) => value.path === path)\n      .map(([key]) => key)\n      .find(key => key);\n\n    if (this.props.onDeepLink) {\n      this.props.onDeepLink({ url, action: actionKey, params });\n    } else if (actionKey && navigationStore[actionKey]) {\n      // Call the action associated with the scene's path with the parsed parameters.\n      navigationStore[actionKey](params);\n    }\n  };\n\n  render() {\n    const { dispatch, state, navigator: AppNavigator } = this.props;\n    if (dispatch && state) {\n      navigationStore.externalDispatch = dispatch;\n      navigationStore.externalState = state;\n      return (\n        <AppNavigator\n          dispatch={navigationStore.dispatch}\n          state={navigationStore.state}\n          ref={(navigatorRef) => {\n            navigationStore.setTopLevelNavigator(navigatorRef);\n          }}\n        />\n      );\n    }\n    return (\n      <AppNavigator\n        onNavigationStateChange={navigationStore.onNavigationStateChange}\n        ref={(navigatorRef) => {\n          navigationStore.setTopLevelNavigator(navigatorRef);\n        }}\n      />\n    );\n  }\n}\n\nconst Router = ({\n  createReducer, sceneStyle, onStateChange, scenes, uriPrefix, navigator, getSceneStyle, children, onDeepLink, wrapBy, ...props\n}) => {\n  const data = { ...props };\n  if (getSceneStyle) {\n    data.cardStyle = getSceneStyle(props);\n  }\n  if (sceneStyle) {\n    data.cardStyle = sceneStyle;\n  }\n  const AppNavigator = scenes || navigator || navigationStore.create(children, data, wrapBy);\n  navigationStore.reducer = createReducer && createReducer(props);\n  if (onStateChange) {\n    navigationStore.onStateChange = onStateChange;\n  }\n  return <App {...props} onDeepLink={onDeepLink} navigator={AppNavigator} uriPrefix={uriPrefix} />;\n};\nRouter.propTypes = {\n  onStateChange: PropTypes.func,\n  scenes: PropTypes.func,\n  navigator: PropTypes.func,\n  wrapBy: PropTypes.func,\n  getSceneStyle: PropTypes.func,\n  sceneStyle: ViewPropTypes.style,\n  createReducer: PropTypes.func,\n  children: PropTypes.element,\n  uriPrefix: PropTypes.string,\n  onDeepLink: PropTypes.func,\n};\nRouter.defaultProps = {\n  onStateChange: null,\n  scenes: null,\n  navigator: null,\n  wrapBy: props => props,\n  getSceneStyle: null,\n  sceneStyle: null,\n  children: null,\n  uriPrefix: null,\n  onDeepLink: null,\n};\n\nexport default Router;\n"]},"metadata":{},"sourceType":"module"}